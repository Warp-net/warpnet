project_name: warpnet
version: 2

builds:
  # Linux
  - id: member-linux
    main: ./cmd/node/member/
    binary: member
    env: [ CGO_ENABLED=1 ]
    goos: [linux]
    goarch: [ amd64 ]
    flags:
      - -mod=vendor
      - -tags=webkit2_41
    ldflags:
      - -s -w
    hooks:
      pre: |
        sh -c 'cd cmd/node/member && wails build -tags webkit2_41 -platform linux/amd64 -clean'

  # macOS
#  - id: member-macos
#    main: ./cmd/node/member/
#    binary: member
#    env: [ CGO_ENABLED=1 ]
#    goos: [darwin]
#    goarch: [amd64, arm64]
#    ldflags:
#      - -mod=vendor
#      - -s -w
#    hooks:
#      pre: |
#        (cd cmd/node/member && wails build -platform darwin/{{ .Arch }} -clean)

  # Windows
#  - id: member-windows
#    main: ./cmd/node/member/
#    binary: member
#    env: [ CGO_ENABLED=1 ]
#    goos: [windows]
#    goarch: [amd64]
#    ldflags:
#      - -mod=vendor
#      - -s -w
#    hooks:
#      pre: |
#        (cd cmd/node/member && wails build -platform windows/amd64 -clean)

release:
  github:
    owner: Warp-net
    name: warpnet

