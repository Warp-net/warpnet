project_name: warpnet
version: 2

builds:
  - id: member-release
    main: ./cmd/node/member/
    binary: member
    env:
      - CGO_ENABLED=1
    goos: [ linux, windows, darwin ]
    goarch: [ amd64, arm64 ]
    flags:
      - -mod=vendor
    hooks:
      pre: |
        sudo apt update &&
        sudo apt install -y libwebkit2gtk-4.1-dev &&
        go install github.com/wailsapp/wails/v2/cmd/wails@v2.10.2 &&
        cd cmd/node/member && wails build -tags webkit2_41 -platform linux/amd64 -clean

release:
  github:
    owner: Warp-net
    name: warpnet

